@using Demo.Core.Models;
@using Demo.Core.ValueObjects;
@using Demo.Web.Models;
@using Demo.Web.Extensions;
@using Demo.Web.Helpers;
@model OrderViewModel

<!-- Begin:: Banner Section -->
<section class="order_section" style="margin-top: 120px;">
    <div class="container largeContainer">
        <div class="row">
            <div class="col-lg-12">
                <div class="related_area text-center">
                    <div class="subTitle sbsm">Thông tin khách hàng</div>
                    <h2 class="secTitle">Hoàn tất đơn hàng</h2>
                </div>
            </div>
        </div>

        <!-- Form Order Details -->
        <form id="orderForm" onsubmit="return false;">
            <div class="row">
                <!-- Customer Information -->
                <div class="col-lg-6">
                    <div class="form-group">
                        <label for="customerName" class="span_bold">Tên khách hàng</label>
                        <input type="text" id="customerName" name="customerName" value="@Model.CustomerName"
                               class="form-control" placeholder="Nhập tên của bạn" required>
                    </div>

                    <div class="form-group">
                        <label for="customerPhone" class="span_bold">Số điện thoại</label>
                        <input type="tel" id="customerPhone" name="customerPhone" value="@Model.CustomerPhone"
                               class="form-control" placeholder="Nhập số điện thoại của bạn" required>
                    </div>

                    <div class="form-group">
                        <label for="customerEmail" class="span_bold">Email</label>
                        <input type="email" id="customerEmail" name="customerEmail" value="@Model.CustomerEmail"
                               class="form-control" placeholder="Nhập email của bạn" required>
                    </div>

                    <div class="form-group">
                        <label for="customerAddress" class="span_bold">Địa chỉ</label>
                        <input type="text" id="customerAddress" name="customerAddress" value="@Model.CustomerAddress"
                               class="form-control" placeholder="Nhập địa chỉ của bạn" required>
                    </div>
                </div>

                <!-- Product and Payment Information -->
                <div class="col-lg-6" id="checkoutContainer">
                    <div class="form-group text-center">
                        <h3><label class="span_bold">Sản phẩm đã đặt mua</label></h3>
                        <ul id="orderedProducts" class="list-group">
                            @if (Model != null && Model.CartItem != null && Model.CartItem.Count > 0)
                            {
                                @foreach (var item in Model.CartItem)
                                {
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div>
                                            <strong>SP @(Model.CartItem.IndexOf(item) + 1): </strong>@item.Title
                                        </div>
                                        <span class="badge badge-primary badge-pill">@item.Price.ToString("#,##0 VND")</span>
                                    </li>
                                }
                            }
                            else
                            {
                                <li class="list-group-item">Không có sản phẩm nào trong giỏ hàng.</li>
                            }
                        </ul>
                        <span class="badge badge-primary badge-pill mt-2">
                            Tổng tiền: @Model.CartItem.Sum(x => x.Price).ToString("#,##0 VND")
                        </span>
                    </div>

                    <div class="form-group">
                        <label class="span_bold">Hình thức thanh toán</label>
                        @Html.DropDownListFor(x => x.PaymentOptions, Model.PaymentOptions, "Chọn hình thức thanh toán",
                                 new { @class = "form-control" })
                    </div>

                    <div class="form-group">
                        <label class="span_bold">Tổng số tiền phải thanh toán</label>
                        <p id="totalAmount" class="green">@Model.CartItem.Sum(item => item.Price).ToString("C")</p>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="row">
                <div class="col-lg-12 text-right">
                    <button class="organ_btn" type="submit">
                        <i class="twi-arrow-right mr-5"></i>Hoàn thành
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>

@* <script>
$(document).ready(function () {
$('#PaymentOption').on('change', function () {
var val = $(this).val();
var price = 0;
var area = $("#GardenArea").val();
if (val === '') {
$("#paymentTypePrice").html("0");
$("#paymentTypeDiscountPrice").attr("data-price", 0);
$("#paymentTypeDiscountPrice").html("0");
} else if (val == '@PaymentOption.OneMonth.GetHashCode()') {
price = gardenPrice * area * 6;
$("#paymentTypePrice").html(price.toLocaleString());
price = price * 90 / 100;
$("#paymentTypeDiscountPrice").attr("data-price", price);
$("#paymentTypeDiscountPrice").html(price.toLocaleString());
} else if (val == '@PaymentOption.ThreeMonths.GetHashCode()') {
price = gardenPrice * area * 12;
$("#paymentTypePrice").html(price.toLocaleString());
price = price * 80 / 100;
$("#paymentTypeDiscountPrice").attr("data-price", price);
$("#paymentTypeDiscountPrice").html(price.toLocaleString());
}
totalPrice();
});
});
</script> *@
